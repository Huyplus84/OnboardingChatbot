<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Data Flow - Onboarding Chatbot</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .header h1 {
            font-size: 3.5em;
            font-weight: 100;
            letter-spacing: -2px;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            overflow-x: auto;
        }

        .nav-tab {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: #e9ecef;
            color: #333;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            padding: 40px;
            min-height: 600px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .flow-description {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(240, 147, 251, 0.3);
        }

        .flow-description h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
            font-weight: 300;
        }

        .flow-description p {
            font-size: 1.1em;
            line-height: 1.6;
            opacity: 0.95;
        }

        .mermaid {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 15px 35px rgba(0,0,0,0.08);
            border: 1px solid #e9ecef;
            position: relative;
            overflow: hidden;
        }

        .mermaid::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.08);
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .feature-card:hover::before {
            transform: scaleX(1);
        }

        .feature-card h4 {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .feature-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .feature-steps {
            list-style: none;
            padding: 0;
        }

        .feature-steps li {
            padding: 8px 0;
            color: #555;
            position: relative;
            padding-left: 25px;
        }

        .feature-steps li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: 100;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }

        .export-section {
            background: #f8f9fa;
            padding: 40px;
            text-align: center;
            border-top: 1px solid #e9ecef;
        }

        .export-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .export-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5em;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animation for diagram loading */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mermaid {
            animation: fadeInUp 0.6s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîÑ Interactive Data Flow</h1>
            <p>Onboarding Chatbot System - Complete Process Visualization</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('chatbot-flow')">ü§ñ Chatbot Flow</button>
            <button class="nav-tab" onclick="showTab('roadmap-flow')">üó∫Ô∏è Roadmap Flow</button>
            <button class="nav-tab" onclick="showTab('content-flow')">üìù Content Flow</button>
            <button class="nav-tab" onclick="showTab('document-flow')">üìÑ Document Flow</button>
            <button class="nav-tab" onclick="showTab('overview')">üìä System Overview</button>
        </div>

        <!-- Chatbot Flow Tab -->
        <div id="chatbot-flow" class="tab-content">
            <div class="tab-pane active">
                <div class="flow-description">
                    <h3>ü§ñ Chatbot AI Processing Flow</h3>
                    <p>This diagram shows how user messages are processed through the intelligent chatbot system, including vector search, AI processing, and response generation with smart suggestions.</p>
                </div>

                <div class="mermaid">
                    sequenceDiagram
                        participant U as üë§ User
                        participant CI as üñ•Ô∏è Frontend
                        participant API as üîß Backend API
                        participant CB as ü§ñ chatbot.py
                        participant VDB as üóÇÔ∏è ChromaDB
                        participant AI as üß† OpenAI

                        Note over U,AI: Message Processing Flow
                        U->>+CI: Type message / Click suggestion
                        CI->>CI: Update UI state
                        CI->>+API: POST /api/chatbot {question}
                        API->>+CB: get_answer(query)
                        
                        alt Special Commands
                            CB->>CB: Check keywords (help, roadmap, email)
                            CB-->>API: Return template response
                        else Normal Question
                            CB->>+VDB: Generate embedding & search
                            VDB-->>-CB: Similar documents (top_k=5)
                            CB->>+AI: Generate contextual answer
                            AI-->>-CB: GPT-4o response
                        end
                        
                        CB-->>-API: Final answer
                        API-->>-CI: JSON response
                        CI->>CI: Add message to chat
                        CI->>U: Display response

                        Note over U,AI: Smart Suggestions Flow
                        CI->>+API: POST /api/chatbot/suggestions
                        API->>+CB: get_smart_suggestions(history)
                        CB->>+VDB: RAG search on chat history
                        VDB-->>-CB: Relevant questions
                        CB-->>-API: Suggestion list
                        API-->>-CI: JSON suggestions
                        CI->>U: Show suggestion badges
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <h4>üß† AI Processing</h4>
                        <p>Advanced natural language processing with context understanding</p>
                        <ul class="feature-steps">
                            <li>Vector embedding generation</li>
                            <li>Semantic similarity search</li>
                            <li>GPT-4o response generation</li>
                            <li>Context-aware answers</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üîç Smart Search</h4>
                        <p>ChromaDB vector database for intelligent document retrieval</p>
                        <ul class="feature-steps">
                            <li>Embedding-based search</li>
                            <li>Similarity threshold filtering</li>
                            <li>Relevant context extraction</li>
                            <li>RAG implementation</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üí° Dynamic Suggestions</h4>
                        <p>Context-aware question recommendations based on chat history</p>
                        <ul class="feature-steps">
                            <li>History analysis</li>
                            <li>Pattern recognition</li>
                            <li>Relevant question mining</li>
                            <li>Real-time updates</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Roadmap Flow Tab -->
        <div id="roadmap-flow" class="tab-content">
            <div class="tab-pane">
                <div class="flow-description">
                    <h3>üó∫Ô∏è Personalized Roadmap Generation</h3>
                    <p>Creating customized onboarding roadmaps based on employee position, experience level, and learning preferences using AI-powered content generation.</p>
                </div>

                <div class="mermaid">
                    sequenceDiagram
                        participant U as üë§ User
                        participant RG as üó∫Ô∏è RoadmapGenerator
                        participant API as üîß Backend API
                        participant RM as üìä roadmap_manager.py
                        participant RD as üìÑ roadmap_data.json
                        participant AI as üß† OpenAI API

                        Note over U,AI: 1. Load Available Positions
                        RG->>+API: GET /api/roadmap/positions
                        API->>+RM: get_available_positions()
                        RM->>+RD: Load positions from JSON
                        RD-->>-RM: Available positions array
                        RM-->>-API: Positions list
                        API-->>-RG: JSON {positions}
                        RG->>U: Display position dropdown

                        Note over U,AI: 2. Generate Personalized Roadmap
                        U->>RG: Select position + experience level
                        RG->>+API: POST /api/roadmap/generate
                        API->>+RM: generate_personalized_roadmap()
                        RM->>+RD: Load roadmap template
                        RD-->>-RM: Base roadmap structure
                        RM->>+AI: Customize with GPT-4o
                        AI-->>-RM: Personalized content
                        RM-->>-API: Complete roadmap
                        API-->>-RG: JSON {roadmap}
                        RG->>U: Interactive roadmap view

                        Note over U,AI: 3. Learning Suggestions
                        U->>RG: Mark items completed
                        RG->>+API: POST /api/roadmap/suggestions
                        API->>+RM: get_learning_suggestions()
                        RM->>+AI: Generate next steps
                        AI-->>-RM: Suggested actions
                        RM-->>-API: Learning suggestions
                        API-->>-RG: JSON {suggestions}
                        RG->>U: Display next steps
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <h4>üéØ Position-Based</h4>
                        <p>Tailored roadmaps for different roles</p>
                        <ul class="feature-steps">
                            <li>Developer paths</li>
                            <li>Designer journeys</li>
                            <li>Marketing tracks</li>
                            <li>HR onboarding</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üìä Progress Tracking</h4>
                        <p>Monitor learning advancement</p>
                        <ul class="feature-steps">
                            <li>Completion markers</li>
                            <li>Learning analytics</li>
                            <li>Time estimation</li>
                            <li>Achievement badges</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üß† AI Customization</h4>
                        <p>Intelligent content adaptation</p>
                        <ul class="feature-steps">
                            <li>Experience level adjustment</li>
                            <li>Interest-based filtering</li>
                            <li>Dynamic recommendations</li>
                            <li>Learning path optimization</li>
                        </ul>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">5</span>
                        <div class="stat-label">Available Positions</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <div class="stat-label">Experience Levels</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">‚àû</span>
                        <div class="stat-label">Custom Roadmaps</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Flow Tab -->
        <div id="content-flow" class="tab-content">
            <div class="tab-pane">
                <div class="flow-description">
                    <h3>üìù Automated Content Generation</h3>
                    <p>AI-powered content creation for emails, document summaries, training questions, and onboarding checklists with customizable templates.</p>
                </div>

                <div class="mermaid">
                    sequenceDiagram
                        participant U as üë§ User
                        participant CG as üìù ContentGenerator
                        participant API as üîß Backend API
                        participant CT as ‚úâÔ∏è content_generator.py
                        participant ET as üìß email_templates.json
                        participant AI as üß† OpenAI API

                        Note over U,AI: 1. Welcome Email Generation
                        U->>CG: Fill employee info form
                        CG->>+API: POST /api/content/welcome-email
                        API->>+CT: generate_welcome_email()
                        CT->>+ET: Load email template
                        ET-->>-CT: Template structure
                        CT->>+AI: Personalize with employee data
                        AI-->>-CT: Personalized email content
                        CT-->>-API: Complete email
                        API-->>-CG: JSON {email, generated_at}
                        CG->>U: Display email preview

                        Note over U,AI: 2. Document Summarization
                        U->>CG: Paste document text + select type
                        CG->>+API: POST /api/content/summarize
                        API->>+CT: summarize_document()
                        CT->>+AI: Generate summary with specific style
                        AI-->>-CT: Summary content
                        CT-->>-API: Summary result
                        API-->>-CG: JSON {summary, summary_type}
                        CG->>U: Display summary

                        Note over U,AI: 3. Training Questions
                        U->>CG: Input content + question settings
                        CG->>+API: POST /api/content/training-questions
                        API->>+CT: generate_training_questions()
                        CT->>+AI: Create questions from content
                        AI-->>-CT: Generated questions array
                        CT-->>-API: Questions with answers
                        API-->>-CG: JSON {questions, question_type}
                        CG->>U: Display interactive quiz

                        Note over U,AI: 4. Onboarding Checklist
                        U->>CG: Select position + department
                        CG->>+API: POST /api/content/onboarding-checklist
                        API->>+CT: generate_onboarding_checklist()
                        CT->>+AI: Create checklist for role
                        AI-->>-CT: Customized checklist
                        CT-->>-API: Checklist items
                        API-->>-CG: JSON {checklist, position}
                        CG->>U: Display checklist with progress
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <h4>üìß Email Generation</h4>
                        <p>Personalized welcome and reminder emails</p>
                        <ul class="feature-steps">
                            <li>Employee info integration</li>
                            <li>Template customization</li>
                            <li>Professional formatting</li>
                            <li>Multi-language support</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üìÑ Smart Summarization</h4>
                        <p>Intelligent document analysis and summarization</p>
                        <ul class="feature-steps">
                            <li>Key points extraction</li>
                            <li>Action items identification</li>
                            <li>Multiple summary types</li>
                            <li>Length optimization</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>‚ùì Quiz Generator</h4>
                        <p>Automated training question creation</p>
                        <ul class="feature-steps">
                            <li>Multiple choice questions</li>
                            <li>True/false questions</li>
                            <li>Mixed question types</li>
                            <li>Difficulty adjustment</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Document Flow Tab -->
        <div id="document-flow" class="tab-content">
            <div class="tab-pane">
                <div class="flow-description">
                    <h3>üìÑ Document Processing & Auto-fill</h3>
                    <p>Advanced document processing with OCR, information extraction, and intelligent form auto-filling using AI-powered data mapping.</p>
                </div>

                <div class="mermaid">
                    sequenceDiagram
                        participant U as üë§ User
                        participant DE as üìÑ DocumentExtractor
                        participant API as üîß Backend API
                        participant DX as üîç document_extractor.py
                        participant FS as üíæ File System
                        participant FT as üìã form_templates.json
                        participant AI as üß† OpenAI API

                        Note over U,AI: 1. Document Upload & Processing
                        U->>DE: Upload file (CV/ID/Diploma)
                        DE->>+API: POST /api/extract/upload (FormData)
                        API->>+FS: Save file to ./uploads/
                        FS-->>-API: File path
                        API->>+DX: process_document_file()
                        
                        alt PDF/DOCX File
                            DX->>DX: Extract text with parser
                        else Image File  
                            DX->>DX: OCR processing
                        end
                        
                        DX->>+AI: Extract structured data
                        AI-->>-DX: JSON structured information
                        DX-->>-API: Extraction result
                        API->>+FS: Delete temporary file
                        API-->>-DE: JSON {result, processed_at}
                        DE->>U: Display extracted information

                        Note over U,AI: 2. Auto-fill Form Process
                        U->>DE: Select form template
                        DE->>+API: POST /api/extract/auto-fill
                        API->>+DX: auto_fill_form()
                        DX->>+FT: Load form template structure
                        FT-->>-DX: Template fields mapping
                        DX->>DX: Map extracted data to form fields
                        DX->>+AI: Fill missing fields intelligently
                        AI-->>-DX: Complete form data
                        DX-->>-API: Filled form
                        API-->>-DE: JSON {filled_form, form_template}
                        DE->>U: Display pre-filled form

                        Note over U,AI: 3. Complete Process
                        U->>DE: Upload file with form selection
                        DE->>+API: POST /api/extract/process-complete
                        API->>+FS: Save uploaded file
                        API->>+DX: process_document_file()
                        DX->>+AI: Extract data
                        AI-->>-DX: Structured data
                        DX->>+DX: auto_fill_form()
                        DX->>+AI: Complete form
                        AI-->>-DX: Final form
                        DX-->>-API: Complete result
                        API->>+FS: Cleanup temp files
                        API-->>-DE: JSON {document_processing, auto_filled_form}
                        DE->>U: Display complete workflow result
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <h4>üìÑ Multi-format Support</h4>
                        <p>Process various document types</p>
                        <ul class="feature-steps">
                            <li>PDF documents</li>
                            <li>Word documents (DOCX)</li>
                            <li>Image files (JPG, PNG)</li>
                            <li>Text files</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üîç Smart Extraction</h4>
                        <p>AI-powered information extraction</p>
                        <ul class="feature-steps">
                            <li>Personal information</li>
                            <li>Work experience</li>
                            <li>Education details</li>
                            <li>Skills and certifications</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üìã Auto-fill Forms</h4>
                        <p>Intelligent form completion</p>
                        <ul class="feature-steps">
                            <li>Employee info forms</li>
                            <li>Contract templates</li>
                            <li>Custom form templates</li>
                            <li>Field validation</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content">
            <div class="tab-pane">
                <div class="flow-description">
                    <h3>üìä Complete System Data Flow</h3>
                    <p>High-level overview of all system components and their interactions, showing the complete data journey from user input to final output.</p>
                </div>

                <div class="mermaid">
                    graph TB
                        subgraph "User Layer"
                            U1[üë§ New Employee]
                            U2[üë§ HR Manager]
                            U3[üë§ Admin User]
                        end
                        
                        subgraph "Frontend Components"
                            F1[ü§ñ Chatbot Interface]
                            F2[üó∫Ô∏è Roadmap Generator]
                            F3[üìù Content Creator]
                            F4[üìÑ Document Processor]
                        end
                        
                        subgraph "API Gateway"
                            A1[üîó REST Endpoints]
                            A2[üîí CORS Handling]
                            A3[üìä Request Processing]
                        end
                        
                        subgraph "Backend Services"
                            B1[ü§ñ AI Chat Service]
                            B2[üó∫Ô∏è Roadmap Service]
                            B3[üìù Content Service]
                            B4[üìÑ Extract Service]
                            B5[üîä Audio Service]
                        end
                        
                        subgraph "External APIs"
                            E1[üß† OpenAI GPT-4o]
                            E2[üî¢ Embedding API]
                            E3[üîä TTS/STT APIs]
                        end
                        
                        subgraph "Data Storage"
                            D1[üóÇÔ∏è Vector Database]
                            D2[üìã JSON Templates]
                            D3[üíæ File Storage]
                            D4[üóÑÔ∏è Document Cache]
                        end
                        
                        U1 --> F1
                        U2 --> F2
                        U2 --> F3
                        U3 --> F4
                        
                        F1 --> A1
                        F2 --> A1
                        F3 --> A1
                        F4 --> A1
                        
                        A1 --> B1
                        A1 --> B2
                        A1 --> B3
                        A1 --> B4
                        A1 --> B5
                        
                        B1 --> E1
                        B1 --> E2
                        B2 --> E1
                        B3 --> E1
                        B4 --> E1
                        B5 --> E3
                        
                        B1 --> D1
                        B2 --> D2
                        B3 --> D2
                        B4 --> D3
                        
                        D1 --> D4
                        D2 --> D4
                        D3 --> D4
                        
                        classDef user fill:#e3f2fd
                        classDef frontend fill:#f1f8e9
                        classDef api fill:#fff3e0
                        classDef backend fill:#f3e5f5
                        classDef external fill:#fce4ec
                        classDef data fill:#e8f5e8
                        
                        class U1,U2,U3 user
                        class F1,F2,F3,F4 frontend
                        class A1,A2,A3 api
                        class B1,B2,B3,B4,B5 backend
                        class E1,E2,E3 external
                        class D1,D2,D3,D4 data
                </div>

                <div class="mermaid">
                    flowchart LR
                        subgraph "Data Processing Pipeline"
                            I[üì• Input] --> P[üîÑ Processing] --> O[üì§ Output]
                        end
                        
                        subgraph "Input Types"
                            I1[üí¨ Text Messages]
                            I2[üìÑ Document Files]
                            I3[üé§ Audio Input]
                            I4[üìã Form Data]
                        end
                        
                        subgraph "Processing Steps"
                            P1[üßÆ Embedding Generation]
                            P2[üîç Vector Search]
                            P3[üß† AI Processing]
                            P4[üìù Content Generation]
                            P5[üîä Audio Processing]
                        end
                        
                        subgraph "Output Results"
                            O1[üí¨ Chat Responses]
                            O2[üó∫Ô∏è Roadmap Plans]
                            O3[üìß Generated Content]
                            O4[üìã Filled Forms]
                            O5[üîä Audio Output]
                        end
                        
                        I1 --> P1
                        I2 --> P3
                        I3 --> P5
                        I4 --> P4
                        
                        P1 --> P2
                        P2 --> P3
                        P3 --> P4
                        
                        P1 --> O1
                        P3 --> O2
                        P4 --> O3
                        P3 --> O4
                        P5 --> O5
                        
                        classDef input fill:#e3f2fd
                        classDef processing fill:#f1f8e9
                        classDef output fill:#e8f5e8
                        
                        class I1,I2,I3,I4 input
                        class P1,P2,P3,P4,P5 processing
                        class O1,O2,O3,O4,O5 output
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <h4>üîÑ Real-time Processing</h4>
                        <p>Instant response capabilities</p>
                        <ul class="feature-steps">
                            <li>Vector search in milliseconds</li>
                            <li>AI response generation</li>
                            <li>Live audio processing</li>
                            <li>Dynamic UI updates</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üß† AI Integration</h4>
                        <p>Advanced artificial intelligence</p>
                        <ul class="feature-steps">
                            <li>OpenAI GPT-4o model</li>
                            <li>Embedding-based search</li>
                            <li>Context-aware responses</li>
                            <li>Multi-modal processing</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>üìÅ Data Management</h4>
                        <p>Efficient storage and retrieval</p>
                        <ul class="feature-steps">
                            <li>Vector database</li>
                            <li>Template management</li>
                            <li>File processing</li>
                            <li>Cache optimization</li>
                        </ul>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">18</span>
                        <div class="stat-label">API Endpoints</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">4</span>
                        <div class="stat-label">Main Features</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">5</span>
                        <div class="stat-label">Backend Services</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">‚àû</span>
                        <div class="stat-label">Possibilities</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="export-section">
            <h3>üì• Export Interactive Diagrams</h3>
            <p>Save these interactive diagrams for documentation or presentations</p>
            <br>
            <button class="export-btn" onclick="exportCurrentDiagram()">üíæ Export Current View</button>
            <button class="export-btn" onclick="exportAllDiagrams()">üì¶ Export All Diagrams</button>
            <button class="export-btn" onclick="generateReport()">üìã Generate Report</button>
        </div>
    </div>

    <script>
        // Initialize Mermaid with custom config
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35
            }
        });

        // Tab switching functionality
        function showTab(tabId) {
            // Hide all tab panes
            const panes = document.querySelectorAll('.tab-pane');
            panes.forEach(pane => pane.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab pane
            const selectedPane = document.querySelector(`#${tabId} .tab-pane`);
            if (selectedPane) {
                selectedPane.classList.add('active');
            }
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Re-render mermaid diagrams in the active tab
            setTimeout(() => {
                mermaid.init();
            }, 100);
        }

        // Export functions
        function exportCurrentDiagram() {
            const activeTab = document.querySelector('.nav-tab.active').textContent;
            alert(`Exporting ${activeTab} diagram...\n\nTo save:\n1. Right-click on the diagram\n2. Select "Save image as..."\n3. Choose your preferred format`);
        }

        function exportAllDiagrams() {
            alert('To export all diagrams:\n\n1. Use browser\'s print function (Ctrl/Cmd + P)\n2. Select "Save as PDF"\n3. Choose "More settings" ‚Üí "Graphics"\n4. Save the complete document');
        }

        function generateReport() {
            const reportContent = `
# Onboarding Chatbot System - Data Flow Report

## System Overview
- 4 Main Features: Chatbot AI, Roadmap Generator, Content Creator, Document Processor
- 18 REST API Endpoints
- AI-powered with OpenAI GPT-4o integration
- Vector database for intelligent search
- Real-time audio processing capabilities

## Key Data Flows
1. **Chatbot Flow**: User input ‚Üí Vector search ‚Üí AI processing ‚Üí Response
2. **Roadmap Flow**: Position selection ‚Üí AI customization ‚Üí Interactive roadmap
3. **Content Flow**: Template selection ‚Üí AI generation ‚Üí Customized content
4. **Document Flow**: File upload ‚Üí OCR/extraction ‚Üí Auto-fill forms

Generated on: ${new Date().toLocaleDateString()}
            `;
            
            const blob = new Blob([reportContent], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'onboarding-chatbot-dataflow-report.md';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Add smooth scrolling and animations
        document.addEventListener('DOMContentLoaded', function() {
            // Animate feature cards on hover
            const cards = document.querySelectorAll('.feature-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

            // Add click interactions to diagrams
            const diagrams = document.querySelectorAll('.mermaid');
            diagrams.forEach(diagram => {
                diagram.addEventListener('click', function() {
                    this.style.transform = this.style.transform === 'scale(1.05)' ? 'scale(1)' : 'scale(1.05)';
                    this.style.transition = 'transform 0.3s ease';
                    this.style.cursor = 'zoom-out';
                    
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                        this.style.cursor = 'zoom-in';
                    }, 2000);
                });
            });
        });

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            const tabs = document.querySelectorAll('.nav-tab');
            const activeIndex = Array.from(tabs).findIndex(tab => tab.classList.contains('active'));
            
            if (e.key === 'ArrowRight' && activeIndex < tabs.length - 1) {
                tabs[activeIndex + 1].click();
            } else if (e.key === 'ArrowLeft' && activeIndex > 0) {
                tabs[activeIndex - 1].click();
            }
        });
    </script>
</body>
</html>